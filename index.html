<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Aza Blog Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      /* Aza-inspired palette */
      --aza-bg: #f8f6f3;        /* ivory */
      --aza-card: #ffffff;      /* white */
      --aza-text: #1f2937;      /* charcoal */
      --aza-subtle:#6b7280;     /* slate-500 */
      --aza-accent:#b08968;     /* warm metallic accent */
      --aza-accent-2:#e6d5c5;   /* soft beige glow */
      --aza-accent-dark:#8d6f54;/* pressed */
      --aza-border:#e5e7eb;     /* border */
      --aza-success:#16a34a;
      --aza-danger:#dc2626;
    }
    html, body { background: var(--aza-bg); color: var(--aza-text); font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; }
    .card{ background: var(--aza-card); border:1px solid var(--aza-border); border-radius: 16px; box-shadow: 0 15px 40px rgba(0,0,0,0.05); backdrop-filter: saturate(140%) blur(6px); }
    .input, .textarea{
      border:1px solid var(--aza-border); border-radius: 14px; padding: 12px 14px; width:100%; background: #fff; outline:none; transition: box-shadow .2s, border-color .2s;
    }
    .input:focus, .textarea:focus{ border-color: var(--aza-accent); box-shadow: 0 0 0 4px rgba(176,137,104,.18); }
    .btn-primary{ background: var(--aza-accent); color:#fff; border-radius: 14px; padding: 12px 16px; font-weight: 600; transition: transform .05s ease, background .2s; }
    .btn-primary:hover{ background: var(--aza-accent-dark); }
    .btn-primary:active{ transform: translateY(1px); }
    .btn-ghost{ background: transparent; border:1px solid var(--aza-border); color: var(--aza-text); border-radius: 12px; padding: 8px 12px; }
    .btn-ghost:hover{ border-color: var(--aza-accent); color: var(--aza-accent); }
    .prose-aza :where(h1,h2,h3,h4){ color: var(--aza-text); font-weight: 800; letter-spacing: -0.01em; }
    .prose-aza a{ color: var(--aza-accent); text-decoration: underline; }
    .prose-aza strong{ font-weight: 700; }
    .prose-aza em{ font-style: italic; }
    .prose-aza code{ background:#f3f4f6; padding:2px 6px; border-radius:6px; }
    .prose-aza ul{ list-style: disc; padding-left:1.25rem; }
    .prose-aza ol{ list-style: decimal; padding-left:1.25rem; }
    .glass-gradient{
      background: radial-gradient(1200px 600px at 10% 0%, rgba(230,213,197,.6), transparent 60%),
                  radial-gradient(900px 500px at 90% 10%, rgba(255,255,255,.6), transparent 65%);
    }
  </style>
</head>
<body class="min-h-screen">
  <!-- Hero -->
  <div class="glass-gradient">
    <header class="max-w-6xl mx-auto px-6 pt-10 pb-6 md:pb-10">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="h-10 w-10 rounded-full" style="background: linear-gradient(135deg, var(--aza-accent), var(--aza-accent-2));"></div>
          <span class="font-extrabold text-xl tracking-tight">Aza Blog Generator</span>
        </div>
      </div>
      <div class="mt-6 md:mt-10">
        <h1 class="text-3xl md:text-5xl font-extrabold leading-tight tracking-tight">Create luxury fashion editorials in your brand voice</h1>
        <p class="text-[color:var(--aza-subtle)] mt-3 md:mt-4 max-w-3xl">
          SEO-friendly, human-first blogs with Aza’s editorial tone. No em dashes, rich formatting, and smart structure out of the box.
        </p>
      </div>
    </header>
  </div>

  <!-- Main -->
  <main class="max-w-6xl mx-auto px-6 pb-16 grid lg:grid-cols-2 gap-6 md:gap-8 -mt-4 md:-mt-8">
    <!-- Form -->
    <section class="card p-6 md:p-8">
      <form id="generator-form" class="space-y-5">
        <div>
          <label class="block text-sm font-semibold mb-1">Blog Topic</label>
          <input id="topic" class="input" type="text" placeholder="e.g., Festive Saree Trends for 2025" required/>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-semibold mb-1">Approx. Character Length</label>
            <input id="charLength" class="input" type="number" placeholder="e.g., 1500" required/>
          </div>
          <div>
            <label class="block text-sm font-semibold mb-1">Number of Paragraphs</label>
            <input id="numParagraphs" class="input" type="number" placeholder="e.g., 5" required/>
          </div>
        </div>

        <div>
          <label class="block text-sm font-semibold mb-1">Additional Requests (optional)</label>
          <textarea id="additional" class="textarea" rows="4" placeholder="e.g., Include a quick styling checklist; keep tone playful; add internal link placeholders."></textarea>
          <p class="text-xs text-[color:var(--aza-subtle)] mt-2">
            This text is passed to the generator as extra instructions.
          </p>
        </div>

        <button id="generate-btn" type="submit" class="btn-primary w-full">
          Generate Blog
        </button>

        <!-- Status message -->
        <div id="message-box" class="hidden text-sm rounded-xl p-3 mt-3"></div>

        <!-- Loading -->
        <div id="loading" class="hidden flex items-center gap-3 text-sm mt-2">
          <svg class="animate-spin h-5 w-5" viewBox="0 0 24 24" fill="none">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4A4 4 0 008 12H4z"></path>
          </svg>
          Generating content…
        </div>
      </form>
    </section>

    <!-- Output -->
    <section class="card p-6 md:p-8 flex flex-col">
      <div class="flex items-center justify-between gap-3">
        <h2 class="text-lg md:text-xl font-bold">Generated Blog</h2>
        <div class="flex items-center gap-2">
          <button id="copy-btn" class="btn-ghost flex items-center gap-2" title="Copy text">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke-width="1.5"></rect>
              <rect x="2" y="2" width="13" height="13" rx="2" ry="2" stroke-width="1.5"></rect>
            </svg>
            Copy
          </button>
        </div>
      </div>

      <div id="output-wrap" class="mt-4 border border-[color:var(--aza-border)] rounded-xl p-5 overflow-auto min-h-[360px] bg-white">
        <article id="output" class="prose-aza space-y-4 text-[15px] leading-7">
          <p class="text-[color:var(--aza-subtle)]">Your blog will appear here…</p>
        </article>
      </div>
    </section>
  </main>

  <script>
    const form = document.getElementById("generator-form");
    const btn = document.getElementById("generate-btn");
    const loading = document.getElementById("loading");
    const msgBox = document.getElementById("message-box");
    const output = document.getElementById("output");
    const copyBtn = document.getElementById("copy-btn");

    function showMessage(text, type = "info"){
      msgBox.classList.remove("hidden");
      msgBox.textContent = text;
      msgBox.style.background =
        type === "error" ? "rgba(220,38,38,0.08)" :
        type === "success" ? "rgba(22,163,74,0.08)" :
        "rgba(176,137,104,0.10)";
      msgBox.style.border = "1px solid var(--aza-border)";
      msgBox.style.color =
        type === "error" ? "var(--aza-danger)" :
        type === "success" ? "var(--aza-success)" :
        "var(--aza-accent)";
    }
    const hideMessage = () => msgBox.classList.add("hidden");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      hideMessage();

      const topic = document.getElementById("topic").value?.trim();
      const charLength = document.getElementById("charLength").value?.trim();
      const numParagraphs = document.getElementById("numParagraphs").value?.trim();
      const additional = document.getElementById("additional").value?.trim();

      if (!topic || !charLength || !numParagraphs) {
        showMessage("Please fill in topic, character length, and number of paragraphs.", "error");
        return;
      }

      btn.disabled = true;
      loading.classList.remove("hidden");
      output.innerHTML = `<p class="text-[color:var(--aza-subtle)]">Generating…</p>`;

      try {
        const response = await fetch("https://blog-ai-rho.vercel.app/api/generate", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            topic,
            charLength,
            numParagraphs,
            additional // sent to backend
          })
        });

        const data = await response.json();

        const text =
          data.output ??
          data.content ??
          data.blog ??
          data?.choices?.[0]?.message?.content ??
          "";

        if (!text) {
          showMessage(data?.error || "No content returned from server.", "error");
          output.innerHTML = `<p class="text-[color:var(--aza-subtle)]">No content.</p>`;
          return;
        }

        // Render Markdown → HTML for rich text
        const html = marked.parse(text);
        output.innerHTML = html;

        showMessage("Content generated successfully.", "success");
      } catch (err) {
        console.error(err);
        showMessage("Request failed. Please try again.", "error");
        output.innerHTML = `<p class="text-[color:var(--aza-subtle)]">An error occurred.</p>`;
      } finally {
        btn.disabled = false;
        loading.classList.add("hidden");
      }
    });

    copyBtn.addEventListener("click", async () => {
      try {
        const plain = output.innerText;
        await navigator.clipboard.writeText(plain);
        showMessage("Copied to clipboard.", "success");
      } catch {
        showMessage("Copy failed. Select and copy manually.", "error");
      }
    });
  </script>
</body>
</html>
